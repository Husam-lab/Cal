<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>حاسبة السعرات</title>
    <link rel="manifest" href="manifest.json">
    <!-- أيقونة favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="./Apple.png">
  </head>
  <body>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: black;
        direction: rtl;
        color: white;
        padding: 0px;
        margin: 0;
        font-size: 14px;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 20px;
        min-height: 100vh;
                font-weight: bold;
      }

h1,
      h3 {
        color: white;
                align-items: center;
        text-align: center;
        margin: 10px 0;
        font-size: 24px;
      }


input[type="text"],
input[type="number"],
select {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    color: white; /* لون النص داخل خانات الإدخال */
    background-color: #444; /* لون الخلفية الرمادي الفاتح */
    border: 0.1px solid #ccc; /* لون الحدود */
    border-radius: 5px;
    box-sizing: border-box;
    text-align: center;
    font-size: 18px; /* حجم الخط العادي (المكتوب) */
    transition: border-color 0.3s ease; /* إضافة انتقال لتغيير الحدود */
}

input[type="text"]:focus,
input[type="number"]:focus,
select:focus {
    border-color: red; /* لون الحدود عند التركيز */
    outline: none; /* إزالة الحدود الافتراضية */
    /* يمكنك إضافة حجم خط مختلف هنا إذا رغبت */
}
      button {
        padding: 12px 20px;
        font-size: 14px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px;
        transition: background-color 0.3s ease, transform 0.2s;
      }

      button:hover {
        transform: translateY(-2px);
      }

      button#calculate {
        background-color: #28a745;
        color: white;
      }

      button#calculate:hover {
        background-color: #218838;
        color: white;
      }

      button#reset,
      button.reset-btn {
        background-color: #dc3545;
        color: white;
      }

      button#reset:hover,
      button.reset-btn:hover {
        background-color: #c82333;
        color: white;
      }

      button.clear-btn {
        background-color: #f44336;
        color: white;
      }

      button.clear-btn:hover {
        background-color: #d93434;
        color: white;
      }

      button.remove-btn {
        background-color: #ff9800;
        width: 10px;
        color: white;
      }

      button.remove-btn:hover {
        background-color: #cc8400;
        color: white;
      }

      .buttons {
        display: flex;
        justify-content: space-around;
        margin-top: 20px;
        flex-wrap: wrap; /* Make buttons wrap on smaller screens */
      }

      .result {
        margin-top: 20px;
        font-size: 18px;
        color: white;
        text-align: center;
      }

      .notes {
        color: white;
        font-size: 14px;
        margin-top: 20px;
        background-color: black;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        text-align: center;
        display: none;
      }

      .notes u {
        font-weight: bold;
      }

      .toggle-notes {
cursor: pointer;
background-color: gray; padding: 10px;
border: none;
outline: none;
        text-align: center;
        font-size: 16px;
                color: #FFD700;
      }
      /* New wrapper for scrollable table */
      .table-wrapper {
        width: 100%;
        overflow-x: hidden;
      }

      table {
        width: 100%;
        border-spacing: 0;
        border-radius: 15px;
        border-collapse: separate;
        background-color: gray;
        font-size: 14px;
        overflow: hidden;

      }

      table,
      th,
      td {
        border: 0.1px solid #ddd;
      }

      th,
      td {
        padding: 5px;
        text-align: center;
      }

      th {
        background-color: black;
        color:  white;
      }

      td {
        font-size: 14px;
      }

      .totals-row {
        font-weight: bold;
        background-color: gray;
        color: black;
      }

      ul {
        list-style-type: none;
        padding: 0;
        display: none;
      }

      ul li {
        background-color: black;
        margin: 5px 0;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      ul li:hover {
        background-color: #e0e0e0;
      }

      .collapsible {
        cursor: pointer;
        background-color: gray;
        padding: 10px;
                color: #FFD700;
        border: none;
        outline: none;
        text-align: center;
        font-size: 16px;
        transition: 0.4s;
      }

      .collapsible:after {
        content: "\25bc"; /* Down arrow */
        font-size: 13px;
        color: black;
        float: center;
        margin-right: 10px;
      }

      .collapsible.active:after {
        content: "\25b2"; /* Up arrow */
      }

      .content {
        padding: 0 18px;
        display: none;
        overflow: hidden;
        background-color: black;
        color: white;
      }

      /* Responsive Styles */
      @media (max-width: 768px) {
        h1,
        h3 {
          font-size: 18px;
                  text-align: center;
        }

        .container {
          max-width: 100%; /* Full width container on mobile */
        }

        input[type="text"],
        input[type="number"],
        select {
          font-size: 12px; /* Smaller font for inputs on mobile */
        }

        button {
          font-size: 12px; /* Slightly smaller buttons for mobile */
          width: 100%; /* Full width buttons for mobile */
          margin: 10px 0;
        }

        table,
        th,
        td {
          font-size: 12px; /* Adjust table font size for smaller screens */
        }

        .buttons {
          flex-direction: column; /* Stack buttons on top of each other on mobile */
          align-items: center;
        }
      }

      @media (max-width: 480px) {
        body {
          padding: 0px; /* Less padding for very small screens */
        }

        h1,
        h3 {
          font-size: 16px; /* Further reduced heading size */
        }

        input[type="text"],
        input[type="number"],
        select {
          font-size: 10px; /* Smaller inputs on very small screens */
        }

        button {
          font-size: 10px; /* Smaller buttons for compact screens */
        }

        table,
        th,
        td {
          font-size: 10px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>حاسبة السعرات</h1>
<div class="container" style="display: flex; justify-content: center; align-items: center;">
  <div class="author" style="color: orange; font-weight: bold;">(إعداد حسام الحديدي)</div>
</div>
      <div class="author">
_________ <img src="https://cdn-icons-png.flaticon.com/512/6750/6750848.png" alt="أيقونة الأموال" style="width: 50px; height: 50px;"> __________
      </div>
      <label for="gender">اختر الجنس :</label>
      <select id="gender" onchange="toggleHipMeasurement()">
        <option value="ذكر">ذكر</option>
        <option value="أنثى">أنثى</option></select
      ><br />

      <label for="weight">ادخل الوزن (كغم):</label>
      <input
        type="number"
        id="weight"
        pattern="[0-9]*"
        inputmode="decimal"
        placeholder="أدخل وزنك (بالكيلوغرام)"
        required
      /><br />

      <label for="calorie_deficit"> عجز السعرات  ( اختياري ):</label>
      <input
        type="number"
        id="calorie_deficit"
                pattern="[0-9]*"
        inputmode="decimal"
        placeholder="أدخل العجز (لانقاص الوزن)"
      /><br />

      <label for="calorie_surplus"> زيادة السعرات ( اختياري )  :</label>
      <input
        type="number"
        id="calorie_surplus"
                pattern="[0-9]*"
        inputmode="decimal"
        placeholder=" ادخل الزيادة (لزيادة الوزن)"
      /><br />

      <label for="waist"> محيط الخصر (سم):</label>
      <input
        type="number"
        id="waist"
                pattern="[0-9]*"
        inputmode="decimal"
        placeholder="أدخل محيط خصرك"
        required
      /><br />

      <label for="neck"> محيط الرقبة (سم):</label>
      <input
        type="number"
        id="neck"
        placeholder="أدخل محيط رقبتك"
                pattern="[0-9]*"
        inputmode="decimal"
        required
      /><br />

      <label for="height"> الطول (سم):</label>
      <input type="number" id="height" placeholder="أدخل طولك"         pattern="[0-9]*"
        inputmode="decimal" required /><br />

      <div id="hipMeasurementContainer" style="display: none">
        <label for="hip"> محيط المؤخرة (سم):</label>
        <input
          type="number"
          id="hip"
                  pattern="[0-9]*"
        inputmode="decimal"
          placeholder="أدخلي محيط المؤخرة"
          required
        /><br />
      </div>

      <div class="buttons">
        <button id="calculate" onclick="calculateCalories()">أحسب</button>
        <button id="reset" onclick="resetForm()">تصفير</button>
      </div>

      <div class="result" id="result">
    <p style="color: #ADD8E6;">محصلة السعرات: <span id="totalCalories"></span> سعرة حرارية</p>
    <p style="color: #90EE90;">احتياجك للكاربوهيدرات: <span id="carbs"></span> غرام</p>
    <p style="color: #90EE90;">احتياجك للبروتينات: <span id="proteins"></span> غرام</p>
    <p style="color: #90EE90;">احتياجك للدهون: <span id="fats"></span> غرام</p>
    <p style="color: #FFFFFF;">نسبة الدهون في جسمك: <span id="bodyFatPercentage"></span>%</p>
</div>
      <button type="button" class="collapsible">انقر هنا للملاحظات حول حاسبة السعرات : </button>
      <div class="content">
        <div id="Notes">
          <br />
          - اذا اردت معرفة كم احتياج جسمك من السعرات للحفاظ على وزنك لاتكتب شيء
          في عجز السعرات او زيادة السعرات .<br />
          <br />
          - اذا اردت نزول صحي اكتب العجز 500-700 سعرة لخسارة مايقارب 3-4 كغم
          شهرياً.<br />
          <br />
          - اذا اردت زيادة الوزن ادخل رقم السعرات التي يجب ان تزيدها على طعامك
          لزيادة الوزن.<br />
          <br />
          - قياس الخصر والرقبة:<br />
          <table class="table">
            <tr>
              <th class="category">الأنثى</th>
              <th class="category">الذكر</th>
            </tr>
            <tr>
              <td>
                يتم أخذ أصغر مقاس للرقبة (تحت الذقن) و مقاس الوسط فوق الصرة و
                أكبر مقاس للمؤخرة.
              </td>
              <td>
                يتم أخذ أصغر مقاس للرقبة (تحت الذقن) و مقاس الوسط عند صرة البطن
                بالسنتيمتر.
              </td>
            </tr>
          </table>
          <br />
          - جدول قياس نسبة الدهون:<br />
          <table class="table">
            <tr>
              <th>الفئة</th>
              <th>الأنثى</th>
              <th>الذكر</th>
            </tr>
            <tr>
              <td>دهون أساسية</td>
              <td>10 – 13%</td>
              <td>2 – 5%</td>
            </tr>
            <tr>
              <td>رياضي محترف</td>
              <td>14 – 20%</td>
              <td>6 – 13%</td>
            </tr>
            <tr>
              <td>فتنس</td>
              <td>21 – 24%</td>
              <td>14 – 17%</td>
            </tr>
            <tr>
              <td>متوسط</td>
              <td>25 – 31%</td>
              <td>18 – 24%</td>
            </tr>
            <tr>
              <td>سمين</td>
              <td>> 31%</td>
              <td>> 25%</td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    <div style="width: 100%; height: 1px; background-color: #218838"></div>
    <div class="container">
      <h1> حساب الطعام</h1>
<div style="display: flex; justify-content: center; align-items: center;">
  <p style="color: orange;">(إذا حسبت القيم من الحاسبة أعلاه سيدخل احتياجك تلقائياً بالجدول)</p>
</div>

      <!-- جدول إدخال الحدود -->
      <h3>جدول احتياجك </h3>
      <table>
        <thead>
          <tr>
            <th>السعرات</th>
            <th>البروتين</th>
            <th>الكارب</th>
            <th>الدهون</th>
            <th>الألياف</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <input
                type="number"
                id="calorieLimit"
                        pattern="[0-9]*"
        inputmode="decimal"
                placeholder="السعرات"
                min="0"
              />
            </td>
            <td>
              <input
                type="number"
                id="proteinLimit"
                        pattern="[0-9]*"
        inputmode="decimal"
                placeholder="البروتين"
                min="0"
              />
            </td>
            <td>
              <input
                type="number"
                id="carbLimit"
                        pattern="[0-9]*"
        inputmode="decimal"
                placeholder="الكارب"
                min="0"
              />
            </td>
            <td>
              <input type="number" id="fatLimit" placeholder="الدهون"         pattern="[0-9]*"
        inputmode="decimal" min="0" />
            </td>
            <td>
              <input
                type="number"
                        pattern="[0-9]*"
        inputmode="decimal"
                id="fiberLimit"
                placeholder="الألياف"
                min="0"
              />
            </td>
          </tr>
        </tbody>
      </table>
      <button class="reset-btn" onclick="resetLimits()">تصفير الاحتياج</button>
      <!-- زر لتصفير الاحتياج -->

      <!-- البحث عن الطعام -->
      <h3>اختر اسم الطعام واكتب بجانبه الكمية بالغرام</h3>
      <div style="display: flex; gap: 5px">
        <!-- خانة الكمية -->
        <input
          type="text"
          id="search"
          placeholder="اكتب اسم الطعام"
          oninput="searchFood()"
          style="width: 45%; flex-shrink: 0"
        />
      <input
        type="number"
        id="quantity"
        value="100"
                pattern="[0-9]*"
        inputmode="decimal"
        min="1"
        style="width: 30%"
      />
        <button onclick="addFood()"style="background-color:  #28a745; color: white; width: 25%;">إدخال</button>
        <!-- زر إدخال -->
        <button onclick="clearSearch()" style="background-color: #dc3545; color: white; width: 25%;">
          مسح  
        </button>
        </div>
        <!-- زر مسح البحث -->
      <ul id="searchResults"></ul>

      <!-- جدول الطعام المختار -->
      <h3>قائمة الأطعمة المختارة</h3>
      <div class="table-wrapper">
        <table id="selectedFoodTable">
          <thead>
            <tr>
              <th>الطعام</th>
              <th>الكمية(غم)</th>
              <th>السعرات</th>
              <th>البروتين</th>
              <th>الكارب</th>
              <th>الدهون</th>
              <th>الألياف</th>
              <th>إزالة</th>
            </tr>
          </thead>
          <tbody></tbody>
          <tr class="totals-row">
            <td>المجموع</td>
            <td id="totalWeight">0</td>
            <td id="totalCalories-red">0</td>
            <td id="totalProtein">0</td>
            <td id="totalCarbs">0</td>
            <td id="totalFats">0</td>
            <td id="totalFiber">0</td>
            <td>
              <button class="clear-btn" onclick="clearTable()">حذف</button>
            </td>
          </tr>
        </table>
      </div>
      <!-- ملاحظات -->
      <div class="toggle-notes" onclick="toggleNotes()">
        <span id="notesArrow">&#x25BC;</span> انقر هنا للملاحظات حول حساب اصناف الطعام :
      </div>
            </div>
    
    ® HUSAM AL-HADIDI
          </div>
      <div class="notes" id="notes">
        <p>
          • القيم المكتوبة في هذا البرنامج هي قيم تقريبية وممكن ان تختلف قليلاً
          وتختلف ايضاً الوجبات بطريقة التحضير والمواد المضافة
        </p>
        <p>
          • تحديد الأهداف الغذائية سيساعدك في اختيار الأطعمة المناسبة لتحقيق
          نتائج أفضل.
        </p>
        <p>
          • استخدم التطبيق لتتبع استهلاكك اليومي من السعرات والقيم الغذائية
          للبقاء على المسار الصحيح.
        </p>
        <p>
          • حاول تحقيق توازن بين البروتينات، الكربوهيدرات، والدهون في نظامك
          الغذائي.
        </p>
        <p>
          • قم بتجربة أطعمة جديدة واستكشاف المعلومات الغذائية الخاصة بها لتنويع
          نظامك الغذائي.
        </p>
        <p>
          • يمكنك تخصيص الوجبات حسب ذوقك واحتياجاتك، ولا تتردد في تعديل الكميات.
        </p>
        <p>• احرص على شرب الماء .</p>
        <p>• قم بتقييم تقدمك بشكل دوري لتعديل نظامك الغذائي إذا لزم الأمر.</p>
        <p>
          • تذكر أن تحقيق الأهداف الغذائية يتطلب وقتًا وجهدًا، كن صبورًا مع نفسك
          واحتفل بالنجاحات الصغيرة.
        </p>
        <p>• احسب كل شيء فهنالك أطعمة صغيرة الحجم وكثيرة السعرات.</p>
      </div>
    </div>
    <script>
      function calculateCalories() {
        // الحصول على القيم من الحقول
        let weight = parseFloat(document.getElementById("weight").value);
        let calorieDeficit =
          parseFloat(document.getElementById("calorie_deficit").value) || 0; // استخدام 0 إذا لم يتم إدخال قيمة
        let calorieSurplus =
          parseFloat(document.getElementById("calorie_surplus").value) || 0; // استخدام 0 إذا لم يتم إدخال قيمة
        let gender = document.getElementById("gender").value;
        let waist = parseFloat(document.getElementById("waist").value);
        let neck = parseFloat(document.getElementById("neck").value);
        let height = parseFloat(document.getElementById("height").value);
        let hip =
          document.getElementById("hip").style.display !== "none"
            ? parseFloat(document.getElementById("hip").value)
            : 0;

        // التحقق من القيم المدخلة
        if (isNaN(weight) || isNaN(waist) || isNaN(neck) || isNaN(height)) {
          alert("يرجى إدخال جميع القيم المطلوبة.");
          return;
        }

        // حساب محصلة السعرات
        let bmr = weight * 22; // احسب السعرات قبل زيادة او نقصان الوزن
        let totalCalories = Math.round(bmr + calorieSurplus - calorieDeficit); // محصلة السعرات

        // حساب النسب الغذائية
        let carbs = Math.round(totalCalories / 4)*(45/100); // احتياج الكربوهيدرات
        let proteins = Math.round(totalCalories / 4)*(30/100); // احتياج البروتينات
        let fats = Math.round(totalCalories / 9)*(25/100); // احتياج الدهون
        // احتياج الدهون حساب نسبة الدهون في الجسم باستخدام معادلة البحرية الأمريكية
        let bodyFatPercentage;
        if (gender === "ذكر") {
          bodyFatPercentage = (
            86.01 * Math.log10(waist - neck) -
            70.041 * Math.log10(height) +
            36.76
          ).toFixed(1); // رقم عشري واحد بعد الفارزة
        } else {
          bodyFatPercentage = (
            163.205 * Math.log10(waist + hip - neck) -
            97.684 * Math.log10(height) -
            78.387
          ).toFixed(1); // رقم عشري واحد بعد الفارزة
        }

        // التحقق من القيمة الناتجة عن نسبة الدهون
        bodyFatPercentage = isNaN(bodyFatPercentage)
          ? "N/A"
          : parseFloat(bodyFatPercentage).toFixed(1); // إذا كانت النتيجة غير صالحة، ضع "N/A"

        // عرض النتائج
        document.getElementById("totalCalories").textContent = totalCalories;
        document.getElementById("calorieLimit").value = parseInt(totalCalories);
        document.getElementById("carbs").textContent = carbs;
        document.getElementById("carbLimit").value = parseInt(carbs);
        document.getElementById("proteins").textContent = proteins;
        document.getElementById("proteinLimit").value = parseInt(proteins);
        document.getElementById("fats").textContent = fats;
        document.getElementById("fatLimit").value = parseInt(fats);
        document.getElementById("bodyFatPercentage").textContent =
          bodyFatPercentage;
      }

      function resetForm() {
        document.getElementById("weight").value = "";
        document.getElementById("calorie_deficit").value = "";
        document.getElementById("calorie_surplus").value = "";
        document.getElementById("waist").value = "";
        document.getElementById("neck").value = "";
        document.getElementById("height").value = "";
        document.getElementById("hip").value = "";
        document.getElementById("totalCalories").textContent = "";
        document.getElementById("carbs").textContent = "";
        document.getElementById("proteins").textContent = "";
        document.getElementById("fats").textContent = "";
        document.getElementById("bodyFatPercentage").textContent = "";
      }

      function toggleHipMeasurement() {
        const hipMeasurementContainer = document.getElementById(
          "hipMeasurementContainer"
        );
        hipMeasurementContainer.style.display =
          document.getElementById("gender").value === "أنثى" ? "block" : "none";
      }

      // إضافة حدث للنقر على الزر القابل للتوسيع
      const coll = document.getElementsByClassName("collapsible");
      for (let i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
          this.classList.toggle("active");
          const content = this.nextElementSibling;
          if (content.style.display === "block") {
            content.style.display = "none";
          } else {
            content.style.display = "block";
          }
        });
      }

      let selectedFoods = [];

      const foods = [
        { name: 'مرق الباذنجان', calories: 35, protein: 1.5, carbs: 7.0, fats: 0.5, fiber: 1.5 },
        { name: 'بسكويت داجستف الأصلي', calories: 70, protein: 1.1, carbs: 10, fats: 3.2, fiber: 1.0 },
{ name: 'بسكويت داجستف بالشوكولاتة', calories: 90, protein: 1.2, carbs: 12, fats: 4.5, fiber: 1.0 },
{ name: 'بسكويت داجستف بالنكهات', calories: 85, protein: 1.0, carbs: 11, fats: 3.0, fiber: 1.0 },
{ name: 'بسكويت داجستف الخالي من السكر', calories: 60, protein: 1.0, carbs: 8, fats: 2.0, fiber: 1.5 },
{ name: 'بسكويت داجستف الخالي من الغلوتين', calories: 75, protein: 1.0, carbs: 10, fats: 2.5, fiber: 1.0 },
{ name: 'بسكويت داجستف مع الشوفان', calories: 80, protein: 1.5, carbs: 10, fats: 3.0, fiber: 2.0 },
{ name: 'بسكويت داجستف بمكونات طبيعية', calories: 85, protein: 1.2, carbs: 11, fats: 3.5, fiber: 2.5 },
{ name: 'بسكويت داجستف الحلوى', calories: 95, protein: 1.3, carbs: 12, fats: 4.0, fiber: 1.0 },

        // إضافة المزيد من الأطعمة حسب الحاجة
      ];

      function searchFood() {
        const searchValue = document
          .getElementById("search")
          .value.toLowerCase();
        const searchResults = document.getElementById("searchResults");

        if (searchValue === "") {
          searchResults.style.display = "none";
          searchResults.innerHTML = "";
          return;
        }

        const filteredFoods = foods.filter((food) =>
          food.name.includes(searchValue)
        );
        searchResults.innerHTML = "";

        filteredFoods.forEach((food) => {
          const li = document.createElement("li");
          li.textContent = food.name;
          li.onclick = function () {
            document.getElementById("search").value = food.name;
            searchResults.innerHTML = "";
            searchResults.style.display = "none";
          };
          searchResults.appendChild(li);
        });

        searchResults.style.display = "block";
      }

      function addFood() {
        const foodName = document.getElementById("search").value;
        const quantity =
          parseFloat(document.getElementById("quantity").value) || 0;

        if (!foodName || quantity <= 0) {
          alert("يرجى إدخال اسم الطعام وكمية صحيحة.");
          return;
        }

        const food = foods.find((f) => f.name === foodName);

        if (!food) {
          alert("الطعام غير موجود.");
          return;
        }

        selectedFoods.push({ food, quantity });
        updateTable();
      }

      function updateTable() {
        const tbody = document.querySelector("#selectedFoodTable tbody");
        tbody.innerHTML = "";

        let totalCalories = 0;
        let totalProtein = 0;
        let totalCarbs = 0;
        let totalFats = 0;
        let totalFiber = 0;
        let totalWeight = 0;

        selectedFoods.forEach(({ food, quantity }) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${food.name}</td>
            <td>${quantity}</td>
            <td>${((food.calories * quantity) / 100).toFixed(2)}</td>
            <td>${((food.protein * quantity) / 100).toFixed(2)}</td>
            <td>${((food.carbs * quantity) / 100).toFixed(2)}</td>
            <td>${((food.fats * quantity) / 100).toFixed(2)}</td>
            <td>${((food.fiber * quantity) / 100).toFixed(2)}</td>
            <td ><button class="remove-btn" onclick="removeFood('${
              food.name
            }')">X</button></td>
        `;
          tbody.appendChild(row);

          totalCalories += (food.calories * quantity) / 100;
          totalProtein += (food.protein * quantity) / 100;
          totalCarbs += (food.carbs * quantity) / 100;
          totalFats += (food.fats * quantity) / 100;
          totalFiber += (food.fiber * quantity) / 100;
          totalWeight += quantity;
        });

        document.getElementById("totalCalories-red").textContent =
          totalCalories.toFixed(2);
        document.getElementById("totalProtein").textContent =
          totalProtein.toFixed(2);
        document.getElementById("totalCarbs").textContent =
          totalCarbs.toFixed(2);
        document.getElementById("totalFats").textContent = totalFats.toFixed(2);
        document.getElementById("totalFiber").textContent =
          totalFiber.toFixed(2);
        document.getElementById("totalWeight").textContent = totalWeight;

        checkLimits();
      }

      function removeFood(name) {
        selectedFoods = selectedFoods.filter((item) => item.food.name !== name);
        updateTable();
      }

      function clearTable() {
        selectedFoods = [];
        updateTable();
      }

      function toggleNotes() {
        const notes = document.getElementById("notes");
        const notesArrow = document.getElementById("notesArrow");
        if (notes.style.display === "none") {
          notes.style.display = "block";
          notesArrow.innerHTML = "&#x25B2;";
        } else {
          notes.style.display = "none";
          notesArrow.innerHTML = "&#x25BC;";
        }
      }
      function toggleNoteS() {
        const notes = document.getElementById("Notes");
        const notesArrow = document.getElementById("notesArrow");
        if (notes.style.display === "none") {
          notes.style.display = "block";
        } else {
          notes.style.display = "none";
        }
      }

      // دالة التحقق من تجاوز الحدود
      function checkLimits() {
        const calorieLimit =
          parseFloat(document.getElementById("calorieLimit").value) || Infinity;
        const proteinLimit =
          parseFloat(document.getElementById("proteinLimit").value) || Infinity;
        const carbLimit =
          parseFloat(document.getElementById("carbLimit").value) || Infinity;
        const fatLimit =
          parseFloat(document.getElementById("fatLimit").value) || Infinity;
        const fiberLimit =
          parseFloat(document.getElementById("fiberLimit").value) || Infinity;

        const totalCalories = parseFloat(
          document.getElementById("totalCalories").textContent
        );
        const totalProtein = parseFloat(
          document.getElementById("totalProtein").textContent
        );
        const totalCarbs = parseFloat(
          document.getElementById("totalCarbs").textContent
        );
        const totalFats = parseFloat(
          document.getElementById("totalFats").textContent
        );
        const totalFiber = parseFloat(
          document.getElementById("totalFiber").textContent
        );

        if (totalCalories > calorieLimit) {
          alert("لقد تجاوزت عدد السعرات المطلوب.");
        }
        if (totalProtein > proteinLimit) {
          alert("لقد تجاوزت غرامات البروتين المطلوب.");
        }
        if (totalCarbs > carbLimit) {
          alert("لقد تجاوزت غرامات الكارب المطلوب.");
        }
        if (totalFats > fatLimit) {
          alert("لقد تجاوزت غرامات الدهون المطلوب.");
        }
        if (totalFiber > fiberLimit) {
          alert("لقد تجاوزت غرامات الألياف المطلوب.");
        }
      }

      // دالة لتصفير الاحتياج
      function resetLimits() {
        document.getElementById("calorieLimit").value = "";
        document.getElementById("proteinLimit").value = "";
        document.getElementById("carbLimit").value = "";
        document.getElementById("fatLimit").value = "";
        document.getElementById("fiberLimit").value = "";
      }

      // دالة لمسح خانة البحث
      function clearSearch() {
        document.getElementById("search").value = "";
      }
    </script>
  </body>
</html>
