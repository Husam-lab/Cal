<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>حاسبة السعرات</title>
    <style>
        body {
          direction: rtl;
            background-color: #000;
            color: #fff;
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        h1 {
            text-align: center;
                    margin: 10px;
          
          
        }         
      
        h2 {
            color: orange; 
            text-align: center;
            font-size: 16px;
          margin: 10px;
        }
        .input-group {
            margin-top: 10px;
            display: flex;
            align-items: center;
        }
        label {
            width: 150px;
            text-align: center;
          width: 70%;
        }
        input, select {
            width: calc(70% - 100px);
            text-align: center;
            align-items: center;
            padding: 10px;
            margin-left: 10px;
            border: 0.1px solid #555;
            border-radius: 5px;
            background-color: #222;
            color: #fff;
            outline: none;
            caret-color: white;
            font-size: 16px;
        }
        button {
            padding: 10px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 48%;
            margin-top: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .reset-button {
            background-color: #dc3545;
        }
        .reset-button:hover {
            background-color: #c82333;
        }
        .collapsible {
            background-color: #444;
            color: #fff;
            cursor: pointer;
            padding: 10px;
            width: 100%;
            border: none;
            text-align: right;
            outline: none;
            font-size: 15px;
            border-radius: 5px;
            margin-top: 10px;
        }
        .content {
            padding: 0 18px;
            display: none;
            overflow: hidden;
            background-color: #333;
            margin-top: 10px;
            border-radius: 5px;
        }
        .margin-top {
            margin-top: 10px;
        }
        .results {
            text-align: center;
        }
    </style>
</head>
<body>

<h1>حاسبة السعرات</h1>
<h2>إعداد حسام الحديدي</h2>

<div class="input-group">
    <label for="gender">اختر الجنس:</label>
    <select id="gender" onchange="toggleHipInput()">
        <option value="male">ذكر</option>
        <option value="female">أنثى</option>
    </select>
</div>

<div class="input-group">
    <label for="weight">الوزن (كغم):</label>
    <input type="number" id="weight" placeholder="ادخل الوزن" min="1" step="0.1" inputmode="decimal" required>
</div>

<div class="input-group">
    <label for="height">الطول (سم):</label>
    <input type="number" id="height" placeholder="ادخل الطول " min="1" step="0.1" inputmode="decimal" required>
</div>

<div class="input-group">
    <label for="waist">محيط البطن (سم):</label>
    <input type="number" id="waist" placeholder="ادخل محيط البطن" min="1" step="0.1" inputmode="decimal" required>
</div>

<div class="input-group">
    <label for="neck">محيط الرقبة (سم)  :</label>
    <input type="number" id="neck" placeholder="ادخل محيط الرقبة" min="1" step="0.1" inputmode="decimal" required>
</div>

<div class="input-group" id="hip-group" style="display: none;">
    <label for="hip">محيط المؤخرة (سم):</label>
    <input type="number" id="hip" placeholder="محيط المؤخرة" min="1" step="0.1" inputmode="decimal" required>
</div>

<div class="input-group">
    <label for="activity-level">مستوى النشاط:</label>
    <select id="activity-level" required>
        <option value="">اختر مستوى النشاط</option>
        <option value="1.2">غير نشيط</option>
        <option value="1.375">تمارين 1-3 أيام</option>
        <option value="1.55">تمارين 3-5 أيام</option>
        <option value="1.725">تمارين 6-7 أيام</option>
        <option value="1.9">تمارين شاقة</option>
    </select>
</div>

<div class="input-group">
    <label for="calorie-deficit">عجز السعرات (اختياري):</label>
    <input type="number" id="calorie-deficit" placeholder="ادخل عجز السعرات (لنقصان وزنك)" step="1">
</div>

<div class="input-group">
    <label for="calorie-surplus">زيادة السعرات (اختياري):</label>
    <input type="number" id="calorie-surplus" placeholder="زيادة السعرات (لزيادة وزنك)" step="1">
</div>

<button onclick="calculate()">احسب</button>
<button class="reset-button" onclick="reset()">تصفير</button>

<div class="results">
    <p id="calories-result"> محصلة السعرات  : <span id="calories"></span> سعرة حرارية</p>
    <p id="calorie-needs">احتياجك للكاربوهيدرات: <span id="carbs"></span> غرام</p>
    <p id="protein-needs">احتياجك للبروتينات: <span id="protein"></span> غرام</p>
    <p id="fat-needs">احتياجك للدهون: <span id="fat"></span> غرام</p>
    <p id="body-fat-result">نسبة دهون جسمك: <span id="body-fat"></span> %</p>
    <p id="fat-mass-result">وزن دهون جسمك: <span id="fat-mass"></span> كغم</p>
    <p id="diagnosis-result">التشخيص: <span id="diagnosis"></span></p>
</div>

<button type="button" class="collapsible">انقر للملاحظات :</button>
<div class="content">
    <p>توصيات:</p>
    <ul>
        <li>احرص على تناول كميات كافية من الماء.</li>
        <li>تناول وجبات متوازنة تحتوي على البروتينات والكربوهيدرات والدهون الصحية.</li>
        <li>مارس التمارين الرياضية بانتظام.</li>
        <li>استشر مختص تغذية لتحديد الاحتياجات الخاصة بك.</li>
    </ul>
</div>

<script>
    function calculateBodyFatPercentage(gender, waist, neck, height, hip = 0) {
        let bodyFatPercentage;

        if (gender === "male") {
            bodyFatPercentage = 86.010 * Math.log10(waist - neck) - 70.041 * Math.log10(height) + 36.76;
        } else {
            bodyFatPercentage = 163.205 * Math.log10(waist + hip - neck) - 97.684 * Math.log10(height) - 78.387;
        }

        return bodyFatPercentage / 100;
    }

    function calculateBMR(gender, weight, waist, neck, height, hip = 0) {
        let bodyFatPercentage = calculateBodyFatPercentage(gender, waist, neck, height, hip);
        let BMR = 370 + 21.6 * (1 - bodyFatPercentage) * weight;
        return BMR;
    }

    function calculateTDEE(gender, weight, waist, neck, height, activityLevel, hip = 0) {
        const BMR = calculateBMR(gender, weight, waist, neck, height, hip);
        const TDEE = BMR * activityLevel;
        return TDEE;
    }

    function calculateMacros(targetCalories, weight) {
        const protein = (1.5 * weight); // 1.5 غرام بروتين لكل كغم
        let fats = (0.3 * targetCalories) / 9; // 30% من السعرات
        let carbs = (targetCalories - (protein * 4 + fats * 9)) / 4; // الكربوهيدرات المتبقية
        return { protein, fats, carbs };
    }

function diagnose(bodyFatPercentage, gender) {
    if (gender === "male") {
        if (bodyFatPercentage < 0.06) {
            return "دهون أساسية";
        } else if (bodyFatPercentage < 0.14) {
            return "رياضي محترف";
        } else if (bodyFatPercentage < 0.18) {
            return "فتنس";
        } else if (bodyFatPercentage < 0.25) {
            return "طبيعي";
        } else {
            return "سمنة";
        }
    } else {
        if (bodyFatPercentage < 0.14) {
            return "دهون أساسية";
        } else if (bodyFatPercentage < 0.21) {
            return "رياضية محترفة";
        } else if (bodyFatPercentage < 0.25) {
            return "فتنس";
        } else if (bodyFatPercentage < 0.32) {
            return "طبيعي";
        } else {
            return "سمنة";
        }
    }
}
function calculate() {
        const gender = document.getElementById("gender").value;
        const weight = parseFloat(document.getElementById("weight").value);
        const height = parseFloat(document.getElementById("height").value);
        const waist = parseFloat(document.getElementById("waist").value);
        const neck = parseFloat(document.getElementById("neck").value);
        const activityLevel = parseFloat(document.getElementById("activity-level").value);
        const calorieDeficit = parseFloat(document.getElementById("calorie-deficit").value) || 0;
        const calorieSurplus = parseFloat(document.getElementById("calorie-surplus").value) || 0;

        let hip = 0;
        if (gender === "female") {
            hip = parseFloat(document.getElementById("hip").value);
        }

        // Check for required inputs
        if (!weight || !height || !waist || !neck || (gender === "female" && !hip) || !activityLevel) {
            alert("يرجى ملء جميع الحقول المطلوبة.");
            return;
        }

        const TDEE = calculateTDEE(gender, weight, waist, neck, height, activityLevel, hip);
        const targetCalories = TDEE - calorieDeficit + calorieSurplus;

        const { protein, fats, carbs } = calculateMacros(targetCalories, weight);
        const bodyFatPercentage = calculateBodyFatPercentage(gender, waist, neck, height, hip);
        const diagnosis = diagnose(bodyFatPercentage);

        // Display results
        document.getElementById("calories").innerText = Math.round(targetCalories);
        document.getElementById("carbs").innerText = Math.round(carbs);
        document.getElementById("protein").innerText = Math.round(protein);
        document.getElementById("fat").innerText = Math.round(fats);
        document.getElementById("body-fat").innerText = Math.round(bodyFatPercentage * 100);
        document.getElementById("fat-mass").innerText = Math.round(weight * bodyFatPercentage);
document.getElementById('diagnosis').innerText = diagnose(bodyFatPercentage, gender);
    }

    function reset() {
        document.getElementById("gender").value = "male";
        document.getElementById("weight").value = "";
        document.getElementById("height").value = "";
        document.getElementById("waist").value = "";
        document.getElementById("neck").value = "";
        document.getElementById("hip").value = "";
        document.getElementById("activity-level").value = "";
        document.getElementById("calorie-deficit").value = "";
        document.getElementById("calorie-surplus").value = "";
        
        document.getElementById("calories").innerText = "";
        document.getElementById("carbs").innerText = "";
        document.getElementById("protein").innerText = "";
        document.getElementById("fat").innerText = "";
        document.getElementById("body-fat").innerText = "";
        document.getElementById("fat-mass").innerText = "";
        document.getElementById("diagnosis").innerText = "";
    }

    function toggleHipInput() {
        const gender = document.getElementById("gender").value;
        const hipGroup = document.getElementById("hip-group");
        hipGroup.style.display = gender === "female" ? "block" : "none";
    }

    // Collapsible content
    const coll = document.getElementsByClassName("collapsible");
    for (let i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            const content = this.nextElementSibling;
            if (content.style.display === "block") {
                content.style.display = "none";
            } else {
                content.style.display = "block";
            }
        });
    }
</script>

</body>
</html>
